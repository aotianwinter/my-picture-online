(this["webpackJsonpmy-picture-online"]=this["webpackJsonpmy-picture-online"]||[]).push([[7],{401:function(e,t,n){e.exports=n.p+"static/media/loading.446d49ea.gif"},402:function(e,t,n){},486:function(e,t,n){"use strict";n.r(t);var a=n(478),r=n(367),c=n.n(r),o=n(368),i=n(56),l=n(0),u=n.n(l),s=n(21),d=n(394),m=n.n(d),p=n(339),f=n(343);var b=u.a.memo((function(e){var t=[];for(var n in e.data)t.push(e.data[n]);return u.a.createElement(u.a.Fragment,null,t.length?u.a.createElement(f.a,{secondary:!0,compact:!0,size:"mini",style:{background:"white",width:"100%",overflow:"auto"}},t.map((function(t,n){return u.a.createElement(f.a.Item,{onClick:function(){return e.onMenuClick(t.id)},key:n},t.name)}))):null)})),h=n(396),v=n.n(h),g=n(188),w=n(97),E=n(488),j=n(41),O=n(42);function k(){var e=Object(j.a)(["\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  width: 100%;\n\n  .img-placeholder {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    object-fit: cover;\n    max-height: 100%;\n    max-width: 100%;\n  }\n\n  :hover {\n    box-shadow: 2px 4px 5px rgba(0, 0, 0, 0.8);\n    .dim__wrap {\n      display: block;\n    }\n  }\n\n  .dim__wrap {\n    display: none;\n    position: absolute;\n    width: 100%;\n    bottom: 0px;\n    background: rgba(0, 0, 0, 0.4);\n    padding: 4px;\n    text-align: right;\n\n    .tag {\n      color: white;\n      float: left;\n    }\n  }\n"]);return k=function(){return e},e}var y=O.b.div(k()),x=n(401),C=n.n(x);n(402);var _=u.a.memo((function(e){var t=e.url,n=e.tag,a=Object(l.useState)(!1),r=Object(i.a)(a,2),c=r[0],o=r[1],s=Object(l.useCallback)((function(){o(!0)}),[]),d=function(){var e=t.split("/bdr/__85/");return 2!==e.length?t:e[0]+"/bdm/640_360_85/"+e[1]};return u.a.createElement(y,null,u.a.createElement(g.a,{hidden:c,className:"img-placeholder",src:C.a,rounded:!0}),u.a.createElement(E.a,{in:!0,classNames:"fade",appear:!0,key:1,timeout:300,unmountOnExit:!0},u.a.createElement(g.a,{onLoad:s,style:{opacity:c?1:0},src:d(),title:n,alt:n,rounded:!0})),u.a.createElement("div",{className:"dim__wrap"},u.a.createElement("span",{className:"tag"},n),u.a.createElement(w.a,{onClick:function(){return e.onPreviewClick()},name:"eye",color:"orange"}),u.a.createElement(w.a,{onClick:function(){return e.onDownloadClick()},name:"download",color:"teal",src:d()})))}));function S(){var e=Object(j.a)(["\n  display: inline-block;\n  width: ",";\n  height: ",";\n"]);return S=function(){return e},e}function P(){var e=Object(j.a)(["\n  text-align: center;\n"]);return P=function(){return e},e}var L=O.b.div(P()),A=O.b.div(S(),(function(e){return e.width}),(function(e){return e.height}));var I=u.a.memo((function(e){var t=e.data,n=(1/(document.body.clientWidth/360)*document.body.clientWidth).toFixed(3),a=(.5625*n).toFixed(3);return u.a.createElement(L,null,t.length>0?t.map((function(t){return u.a.createElement(A,{key:t.id,width:n+"px",height:a+"px"},u.a.createElement(v.a,{height:"100%",offset:200},u.a.createElement(_,{key:t.id,onPreviewClick:function(){return e.handlePreview(t)},onDownloadClick:function(){return e.handleDownload(t)},url:t.url,tag:t.utag})))})):null)})),R=n(344);var M=u.a.memo((function(e){var t=e.previewImg,n=t.url,a=t.utag;return u.a.createElement(R.a,{active:e.visible,onClick:e.handleClick,page:!0},u.a.createElement(g.a,{style:{maxHeight:"90vh"},src:n,title:a,alt:a}))})),D=n(485),N=n(477),T=n(487),U=n(366),W=n(124);function z(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.open("GET",e,!0),n.send(),n.onload=function(){var e=document.createElement("a"),a=window.URL.createObjectURL(n.response);e.href=a,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(a)}}var F=[{desc:"1920 x 1080",filterParam:"/bdm/1920_1080_85/"},{desc:"1366 x 768",filterParam:"/bdm/1366_768_85/"}];var q=u.a.memo((function(e){var t=e.downloadImg,n=t.url,a=t.utag;return u.a.createElement(D.a,{basic:!0,dimmer:"blurring",open:e.visible},u.a.createElement(N.a,{icon:"browser",content:"download options"}),u.a.createElement(D.a.Content,null,u.a.createElement(T.a,{verticalAlign:"middle"},F.length>0?F.map((function(e,t){return u.a.createElement(T.a.Item,{key:t},u.a.createElement(T.a.Content,{floated:"right"},u.a.createElement(U.a,{onClick:function(){return function(e){if(!/Safari/.test(navigator.userAgent)||/Chrome/.test(navigator.userAgent)){var t=n.split("/bdr/__85/");2===t.length?z(t[0]+e+t[1],a+".jpg"):z(n,a+".jpg")}else alert("\u62b1\u6b49\ud83d\ude05\uff01\u6682\u4e0d\u652f\u6301Safari\u4e0b\u8f7d\uff01\u8bf7\u624b\u52a8\u4fdd\u5b58\u7167\u7247\uff01")}(e.filterParam)},basic:!0,color:"green",icon:"download",inverted:!0,size:"mini"})),u.a.createElement(T.a.Content,null,u.a.createElement(W.a,null,e.desc)))})):null)),u.a.createElement(D.a.Actions,null,u.a.createElement(U.a,{onClick:function(){return e.onClose()},color:"green",inverted:!0},"OK")))})),H=n(168),J=n(460),B=n.n(J);B.a.defaults.timeout=1e4;var G=function(){var e=Object(o.a)(c.a.mark((function e(t,n,a,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=t.toLowerCase(),e.t0=t,e.next="get"===e.t0?4:"post"===e.t0?5:6;break;case 4:return e.abrupt("return",B()({method:"get",url:n,params:a}));case 5:return e.abrupt("return",B()({method:"post",url:n,data:a}));case 6:return console.error("\u8bf7\u68c0\u67e5\u8bf7\u6c42\u65b9\u5f0f!"),e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();B.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),B.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));t.default=Object(s.g)(u.a.memo((function(e){var t=Object(l.useState)({cid:e.match.params.id||5,start:0,count:30}),n=Object(i.a)(t,2),r=n[0],s=n[1],d=Object(l.useState)(!0),f=Object(i.a)(d,2),h=f[0],v=f[1],g=Object(l.useState)(!1),w=Object(i.a)(g,2),E=w[0],j=w[1],O=Object(l.useState)(!1),k=Object(i.a)(O,2),y=k[0],x=k[1],C=Object(l.useState)(!1),_=Object(i.a)(C,2),S=_[0],P=_[1],L=Object(l.useState)({}),A=Object(i.a)(L,2),R=A[0],D=A[1],N=Object(l.useState)([]),T=Object(i.a)(N,2),U=T[0],W=T[1],z=Object(l.useState)([]),F=Object(i.a)(z,2),J=F[0],B=F[1],K=Object(l.createRef)();Object(l.useEffect)((function(){X()}),[]),Object(l.useEffect)((function(){Q()}),[r]);var X=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("get","https://bird.ioliu.cn/v1?url=http://cdn.apc.360.cn/index.php?c=WallPaper&a=getAllCategories",void 0);case 2:(t=e.sent).data&&B(t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=Object(a.a)({},r),G("get","https://bird.ioliu.cn/v1?url=http://wallpaper.apc.360.cn/index.php?c=WallPaper&a=getAppsByCategory",n);case 2:(t=e.sent).data&&(0===t.data.data.length?P(!0):W(U.concat(t.data.data)),v(!1));case 4:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),V=Object(l.useCallback)((function(e){D(e),j(!0)}),[]),Y=Object(l.useCallback)((function(e){D(e),x(!0)}),[]),Z=Object(l.useCallback)((function(){j(!1)}),[]),$=Object(l.useCallback)((function(){x(!1)}),[]);return u.a.createElement("div",{ref:K},u.a.createElement(p.a,{context:K,offset:48,styleElement:{zIndex:"10"}},u.a.createElement(b,{onMenuClick:function(t){t!==r.cid&&e.history.push("/wallpaper/"+t),document.body.scrollTop=0,document.documentElement.scrollTop=0,W([]),v(!0),P(!1),s(Object(a.a)({},r,{cid:t}))},data:J})),u.a.createElement(m.a,{initialLoad:!0,pageStart:0,loadMore:function(){v(!0),s(Object(a.a)({},r,{start:r.start+r.count}))},hasMore:!h&&!S&&0!==U.length,threshold:50},u.a.createElement(I,{handlePreview:V,handleDownload:Y,data:U})),h?u.a.createElement(H.a,null):null,S?u.a.createElement("h1",{style:{textAlign:"center"}},"\u6240\u6709\u56fe\u7247\u5df2\u52a0\u8f7d\u5b8c\u6210\uff01\u2728"):null,u.a.createElement(M,{handleClick:Z,visible:E,previewImg:R}),u.a.createElement(q,{onClose:$,visible:y,downloadImg:R}))})))}}]);
//# sourceMappingURL=7.c0e7ea6f.chunk.js.map